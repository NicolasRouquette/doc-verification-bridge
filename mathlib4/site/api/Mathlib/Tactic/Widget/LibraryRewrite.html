<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Tactic.Widget.LibraryRewrite</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Mathlib.Tactic.Widget.LibraryRewrite";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Widget</span>.<span class="name">LibraryRewrite</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Init.html">Init</a></li><li><a href="../../.././ProofWidgets/Component/FilterDetails.html">ProofWidgets.Component.FilterDetails</a></li><li><a href="../../.././Mathlib/Lean/Meta/RefinedDiscrTree.html">Mathlib.Lean.Meta.RefinedDiscrTree</a></li><li><a href="../../.././Mathlib/Tactic/Widget/InteractiveUnfold.html">Mathlib.Tactic.Widget.InteractiveUnfold</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Tactic.Widget.LibraryRewrite" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.RewriteLemma"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">RewriteLemma</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.instBEqRewriteLemma.beq"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">instBEqRewriteLemma</span>.<span class="name">beq</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.instBEqRewriteLemma"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">instBEqRewriteLemma</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.instInhabitedRewriteLemma.default"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">instInhabitedRewriteLemma</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.instInhabitedRewriteLemma"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">instInhabitedRewriteLemma</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.instToFormatRewriteLemma"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">instToFormatRewriteLemma</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.isMVarSwap"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">isMVarSwap</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.eqOrIff?"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">eqOrIff?</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.addRewriteEntry"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">addRewriteEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.addLocalRewriteEntry"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">addLocalRewriteEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.getImportCandidates"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getImportCandidates</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.getModuleCandidates"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getModuleCandidates</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.Rewrite"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">Rewrite</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.checkRewrite"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">checkRewrite</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.checkAndSortRewriteLemmas"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">checkAndSortRewriteLemmas</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.getImportRewrites"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getImportRewrites</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.getModuleRewrites"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getModuleRewrites</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.getHypotheses"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getHypotheses</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.getHypothesisRewrites"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getHypothesisRewrites</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.getBinderInfos"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getBinderInfos</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.isExplicitEq"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">isExplicitEq</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.filterRewrites"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">filterRewrites</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.tacticSyntax"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">tacticSyntax</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.RewriteInterface"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">RewriteInterface</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.Rewrite.toInterface"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">Rewrite</span>.<span class="name">toInterface</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.Kind"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">Kind</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.getRewriteInterfaces"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getRewriteInterfaces</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.pattern"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">pattern</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.renderRewrites"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">renderRewrites</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.rpc"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">rpc</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.LibraryRewriteComponent"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">LibraryRewriteComponent</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.tacticRw??"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">tacticRw??</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.Rewrite.toMessageData"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">Rewrite</span>.<span class="name">toMessageData</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.SectionToMessageData"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">SectionToMessageData</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.rw??Command"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">rw??Command</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.LibraryRewrite.elabrw??Command"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">elabrw??Command</span></a></div></nav><main>
<div class="mod_doc"><h1 id="Point-click-library-rewriting" class="markdown-heading">Point &amp; click library rewriting <a class="hover-link" href="#Point-click-library-rewriting">#</a></h1><p>This file defines <code>rw??</code>, an interactive tactic that suggests rewrites for any expression selected
by the user.</p><p><code>rw??</code> uses a (lazy) <code>RefinedDiscrTree</code> to lookup a list of candidate rewrite lemmas.
It excludes lemmas that are automatically generated.
Each lemma is then checked one by one to see whether it is applicable.
For each lemma that works, the corresponding rewrite tactic is constructed
and converted into a <code>String</code> that fits inside mathlib's 100 column limit,
so that it can be pasted into the editor when selected by the user.</p><p>The <code>RefinedDiscrTree</code> lookup groups the results by match pattern and gives a score to each pattern.
This is used to display the results in sections. The sections are ordered by this score.
Within each section, the lemmas are sorted by</p><ul><li>rewrites with fewer extra goals come first</li><li>left-to-right rewrites come first</li><li>shorter lemma names come first</li><li>shorter replacement expressions come first (when taken as a string)</li><li>alphabetically ordered by lemma name</li></ul><p>The lemmas are optionally filtered to avoid duplicate rewrites, or trivial rewrites. This
is controlled by the filter button on the top right of the results.</p><p>When a rewrite lemma introduces new goals, these are shown after a <code>âŠ¢</code>.</p><h2 id="TODO" class="markdown-heading">TODO <a class="hover-link" href="#TODO">#</a></h2><p>Ways to improve <code>rw??</code>:</p><ul><li>Improve the logic around <code>nth_rw</code> and occurrences,
and about when to pass explicit arguments to the rewrite lemma.
For example, we could only pass explicit arguments if that avoids using <code>nth_rw</code>.
Performance may be a limiting factor for this.
Currently, the occurrence is computed by <code>viewKAbstractSubExpr</code>.</li><li>Modify the interface to allow creating a whole <code>rw [.., ..]</code> chain, without having to go into
the editor in between. For this to work, we will need a more general syntax,
something like <code>rw [..]??</code>, which would be pasted into the editor.</li><li>We could look for rewrites of partial applications of the selected expression.
For example, when clicking on <code>(f + g) x</code>, there should still be an <code><a href="../../.././Mathlib/Algebra/Group/Defs.html#add_comm">add_comm</a></code> suggestion.</li></ul><p>Ways to extend <code>rw??</code>:</p><ul><li>Support generalized rewriting (<code>grw</code>)</li><li>Integrate rewrite search with the <code>calc?</code> widget so that a <code>calc</code> block can be created using
just point &amp; click.</li></ul></div><div class="mod_doc"><h3 id="Caching" class="markdown-heading">Caching <a class="hover-link" href="#Caching">#</a></h3></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.RewriteLemma"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L69-L75">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma" class="verification-badge comp-datatype" title="Computational datatype">ðŸ”¶ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">RewriteLemma</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>The structure for rewrite lemmas stored in the <code>RefinedDiscrTree</code>.</p><ul class="structure_fields" id="Mathlib.Tactic.LibraryRewrite.RewriteLemma.mk"><li id="Mathlib.Tactic.LibraryRewrite.RewriteLemma.name" class="structure_field"><div class="structure_field_info">name : <span class="fn">Lean.Name</span></div><div class="structure_field_doc"><p>The name of the lemma</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.RewriteLemma.symm" class="structure_field"><div class="structure_field_info">symm : <span class="fn">Bool</span></div><div class="structure_field_doc"><p><code><a href="../../.././Mathlib/Order/Defs/Unbundled.html#symm">symm</a></code> is <code>true</code> when rewriting from right to left</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.RewriteLemma" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.instBEqRewriteLemma.beq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L75-L75">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.instBEqRewriteLemma.beq" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.instBEqRewriteLemma.beq"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">instBEqRewriteLemma</span>.<span class="name">beq</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma">RewriteLemma</a> â†’ <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma">RewriteLemma</a> â†’ <span class="fn">Bool</span></span></div></div><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.instBEqRewriteLemma.beq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.instBEqRewriteLemma"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L75-L75">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.instBEqRewriteLemma" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.instBEqRewriteLemma"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">instBEqRewriteLemma</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">BEq</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma">RewriteLemma</a></span></div></div></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.instInhabitedRewriteLemma.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L75-L75">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.instInhabitedRewriteLemma.default" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.instInhabitedRewriteLemma.default"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">instInhabitedRewriteLemma</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma">RewriteLemma</a></div></div><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.instInhabitedRewriteLemma.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.instInhabitedRewriteLemma"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L75-L75">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.instInhabitedRewriteLemma" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.instInhabitedRewriteLemma"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">instInhabitedRewriteLemma</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Inhabited</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma">RewriteLemma</a></span></div></div></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.instToFormatRewriteLemma"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L77-L78">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.instToFormatRewriteLemma" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.instToFormatRewriteLemma"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">instToFormatRewriteLemma</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Std.ToFormat</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma">RewriteLemma</a></span></div></div></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.isMVarSwap"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L80-L114">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.isMVarSwap" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.isMVarSwap"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">isMVarSwap</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t </span><span class="fn">s</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">Bool</span></div></div><p>Return <code>true</code> if <code>s</code> and <code>t</code> are equal up to changing the <code>MVarId</code>s.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.isMVarSwap" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.eqOrIff?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L116-L120">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.eqOrIff?" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.eqOrIff?"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">eqOrIff?</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Option</span> <span class="fn">(<span class="fn">Lean.Expr</span> <span class="fn">Ã—</span> <span class="fn">Lean.Expr</span>)</span></span></div></div><p>Extract the left and right-hand sides of an equality or iff statement.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.eqOrIff?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.addRewriteEntry"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L122-L147">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.addRewriteEntry" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.addRewriteEntry"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">addRewriteEntry</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">name</span> : <span class="fn">Lean.Name</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">cinfo</span> : <span class="fn">Lean.ConstantInfo</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">List</span> <span class="fn">(<a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma">RewriteLemma</a> <span class="fn">Ã—</span> <span class="fn"><span class="fn">List</span> <span class="fn">(<a href="../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Lean.Meta.RefinedDiscrTree.Key</a> <span class="fn">Ã—</span> <a href="../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">Lean.Meta.RefinedDiscrTree.LazyEntry</a>)</span></span>)</span>)</span></span></div></div><p>Try adding the lemma to the <code>RefinedDiscrTree</code>.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.addRewriteEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.addLocalRewriteEntry"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L150-L157">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.addLocalRewriteEntry" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.addLocalRewriteEntry"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">addLocalRewriteEntry</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">decl</span> : <span class="fn">Lean.LocalDecl</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">List</span> <span class="fn">(<span class="fn">(<span class="fn">Lean.FVarId</span> <span class="fn">Ã—</span> <span class="fn">Bool</span>)</span> <span class="fn">Ã—</span> <span class="fn"><span class="fn">List</span> <span class="fn">(<a href="../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Lean.Meta.RefinedDiscrTree.Key</a> <span class="fn">Ã—</span> <a href="../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">Lean.Meta.RefinedDiscrTree.LazyEntry</a>)</span></span>)</span>)</span></span></div></div><p>Try adding the local hypothesis to the <code>RefinedDiscrTree</code>.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.addLocalRewriteEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h3 id="Computing-the-Rewrites" class="markdown-heading">Computing the Rewrites <a class="hover-link" href="#Computing-the-Rewrites">#</a></h3></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.getImportCandidates"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L174-L188">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getImportCandidates" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getImportCandidates"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getImportCandidates</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">(<span class="fn">Array</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma">RewriteLemma</a>)</span>)</span></span></div></div><p>Get all potential rewrite lemmas from the imported environment.
By setting the <code>librarySearch.excludedModules</code> option, all lemmas from certain modules
can be excluded.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.getImportCandidates" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.getModuleCandidates"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L190-L195">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getModuleCandidates" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getModuleCandidates"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getModuleCandidates</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">(<span class="fn">Array</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma">RewriteLemma</a>)</span>)</span></span></div></div><p>Get all potential rewrite lemmas from the current file. Exclude lemmas from modules
in the <code>librarySearch.excludedModules</code> option.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.getModuleCandidates" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.Rewrite"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L198-L211">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite" class="verification-badge comp-datatype" title="Computational datatype">ðŸ”¶ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">Rewrite</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>A rewrite lemma that has been applied to an expression.</p><ul class="structure_fields" id="Mathlib.Tactic.LibraryRewrite.Rewrite.mk"><li id="Mathlib.Tactic.LibraryRewrite.Rewrite.symm" class="structure_field"><div class="structure_field_info">symm : <span class="fn">Bool</span></div><div class="structure_field_doc"><p><code><a href="../../.././Mathlib/Order/Defs/Unbundled.html#symm">symm</a></code> is <code>true</code> when rewriting from right to left</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.Rewrite.proof" class="structure_field"><div class="structure_field_info">proof : <span class="fn">Lean.Expr</span></div><div class="structure_field_doc"><p>The proof of the rewrite</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.Rewrite.replacement" class="structure_field"><div class="structure_field_info">replacement : <span class="fn">Lean.Expr</span></div><div class="structure_field_doc"><p>The replacement expression obtained from the rewrite</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.Rewrite.stringLength" class="structure_field"><div class="structure_field_info">stringLength : <span class="fn">â„•</span></div><div class="structure_field_doc"><p>The size of the replacement when printed</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.Rewrite.extraGoals" class="structure_field"><div class="structure_field_info">extraGoals : <span class="fn"><span class="fn">Array</span> <span class="fn">(<span class="fn">Lean.MVarId</span> <span class="fn">Ã—</span> <span class="fn">Lean.BinderInfo</span>)</span></span></div><div class="structure_field_doc"><p>The extra goals created by the rewrite</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.Rewrite.makesNewMVars" class="structure_field"><div class="structure_field_info">makesNewMVars : <span class="fn">Bool</span></div><div class="structure_field_doc"><p>Whether the rewrite introduces a new metavariable in the replacement expression.</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.Rewrite" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.checkRewrite"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L213-L238">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.checkRewrite" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.checkRewrite"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">checkRewrite</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">thm </span><span class="fn">e</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">symm</span> : <span class="fn">Bool</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">Option</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite">Rewrite</a>)</span></span></div></div><p>If <code>thm</code> can be used to rewrite <code>e</code>, return the rewrite.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.checkRewrite" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.checkAndSortRewriteLemmas"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L243-L258">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.checkAndSortRewriteLemmas" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.checkAndSortRewriteLemmas"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">checkAndSortRewriteLemmas</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">rewrites</span> : <span class="fn"><span class="fn">Array</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteLemma">RewriteLemma</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">(<a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite">Rewrite</a> <span class="fn">Ã—</span> <span class="fn">Lean.Name</span>)</span>)</span></span></div></div><p>Try to rewrite <code>e</code> with each of the rewrite lemmas, and sort the resulting rewrites.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.checkAndSortRewriteLemmas" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.getImportRewrites"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L260-L263">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getImportRewrites" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getImportRewrites"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getImportRewrites</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">(<a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite">Rewrite</a> <span class="fn">Ã—</span> <span class="fn">Lean.Name</span>)</span>)</span>)</span></span></div></div><p>Return all applicable library rewrites of <code>e</code>.
Note that the result may contain duplicate rewrites. These can be removed with <code><a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.filterRewrites">filterRewrites</a></code>.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.getImportRewrites" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.getModuleRewrites"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L265-L267">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getModuleRewrites" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getModuleRewrites"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getModuleRewrites</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">(<a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite">Rewrite</a> <span class="fn">Ã—</span> <span class="fn">Lean.Name</span>)</span>)</span>)</span></span></div></div><p>Same as <code><a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getImportRewrites">getImportRewrites</a></code>, but for lemmas from the current file.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.getModuleRewrites" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h3 id="Rewriting-by-hypotheses" class="markdown-heading">Rewriting by hypotheses <a class="hover-link" href="#Rewriting-by-hypotheses">#</a></h3></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.getHypotheses"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L271-L280">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getHypotheses" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getHypotheses"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getHypotheses</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">except</span> : <span class="fn"><span class="fn">Option</span> <span class="fn">Lean.FVarId</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<a href="../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree">Lean.Meta.RefinedDiscrTree</a> <span class="fn">(<span class="fn">Lean.FVarId</span> <span class="fn">Ã—</span> <span class="fn">Bool</span>)</span>)</span></span></div></div><p>Construct the <code>RefinedDiscrTree</code> of all local hypotheses.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.getHypotheses" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.getHypothesisRewrites"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L282-L291">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getHypothesisRewrites" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getHypothesisRewrites"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getHypothesisRewrites</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">except</span> : <span class="fn"><span class="fn">Option</span> <span class="fn">Lean.FVarId</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">(<a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite">Rewrite</a> <span class="fn">Ã—</span> <span class="fn">Lean.FVarId</span>)</span>)</span>)</span></span></div></div><p>Return all applicable hypothesis rewrites of <code>e</code>. Similar to <code><a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getImportRewrites">getImportRewrites</a></code>.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.getHypothesisRewrites" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h3 id="Filtering-out-duplicate-lemmas" class="markdown-heading">Filtering out duplicate lemmas <a class="hover-link" href="#Filtering-out-duplicate-lemmas">#</a></h3></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.getBinderInfos"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L295-L307">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getBinderInfos" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getBinderInfos"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getBinderInfos</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">fn</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">args</span> : <span class="fn"><span class="fn">Array</span> <span class="fn">Lean.Expr</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">Lean.BinderInfo</span>)</span></span></div></div><p>Get the <code>BinderInfo</code>s for the arguments of <code>mkAppN fn args</code>.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.getBinderInfos" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.isExplicitEq"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L309-L323">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.isExplicitEq" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.isExplicitEq"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">isExplicitEq</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t </span><span class="fn">s</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">Bool</span></span></div></div><p>Determine whether the explicit parts of two expressions are equal,
and the implicit parts are definitionally equal.</p></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.filterRewrites"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L325-L344">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.filterRewrites" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[specialize #[]]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.filterRewrites"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">filterRewrites</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">Î±</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">rewrites</span> : <span class="fn"><span class="fn">Array</span> <span class="fn">Î±</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">replacement</span> : <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn">Lean.Expr</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">makesNewMVars</span> : <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn">Bool</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">Î±</span>)</span></span></div></div><p>Filter out duplicate rewrites, reflexive rewrites
or rewrites that have metavariables in the replacement expression.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.filterRewrites" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h3 id="User-interface" class="markdown-heading">User interface <a class="hover-link" href="#User-interface">#</a></h3></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.tacticSyntax"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L349-L355">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.tacticSyntax" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.tacticSyntax"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">tacticSyntax</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">rw</span> : <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite">Rewrite</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">occ</span> : <span class="fn"><span class="fn">Option</span> <span class="fn">â„•</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">loc</span> : <span class="fn"><span class="fn">Option</span> <span class="fn">Lean.Name</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">Lean.TSyntax</span> <span class="fn">`tactic</span>)</span></span></div></div><p>Return the rewrite tactic that performs the rewrite.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.tacticSyntax" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.RewriteInterface"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L359-L376">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteInterface" class="verification-badge comp-datatype" title="Computational datatype">ðŸ”¶ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteInterface"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">RewriteInterface</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>The structure with all data necessary for rendering a rewrite suggestion</p><ul class="structure_fields" id="Mathlib.Tactic.LibraryRewrite.RewriteInterface.mk"><li id="Mathlib.Tactic.LibraryRewrite.RewriteInterface.symm" class="structure_field"><div class="structure_field_info">symm : <span class="fn">Bool</span></div><div class="structure_field_doc"><p><code><a href="../../.././Mathlib/Order/Defs/Unbundled.html#symm">symm</a></code> is <code>true</code> when rewriting from right to left</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.RewriteInterface.tactic" class="structure_field"><div class="structure_field_info">tactic : <span class="fn">String</span></div><div class="structure_field_doc"><p>The rewrite tactic string that performs the rewrite</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.RewriteInterface.replacement" class="structure_field"><div class="structure_field_info">replacement : <span class="fn">Lean.Expr</span></div><div class="structure_field_doc"><p>The replacement expression obtained from the rewrite</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.RewriteInterface.replacementString" class="structure_field"><div class="structure_field_info">replacementString : <span class="fn">String</span></div><div class="structure_field_doc"><p>The replacement expression obtained from the rewrite</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.RewriteInterface.extraGoals" class="structure_field"><div class="structure_field_info">extraGoals : <span class="fn"><span class="fn">Array</span> <span class="fn">Lean.Widget.CodeWithInfos</span></span></div><div class="structure_field_doc"><p>The extra goals created by the rewrite</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.RewriteInterface.prettyLemma" class="structure_field"><div class="structure_field_info">prettyLemma : <span class="fn">Lean.Widget.CodeWithInfos</span></div><div class="structure_field_doc"><p>The lemma name with hover information</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.RewriteInterface.lemmaType" class="structure_field"><div class="structure_field_info">lemmaType : <span class="fn">Lean.Expr</span></div><div class="structure_field_doc"><p>The type of the lemma</p></div></li><li id="Mathlib.Tactic.LibraryRewrite.RewriteInterface.makesNewMVars" class="structure_field"><div class="structure_field_info">makesNewMVars : <span class="fn">Bool</span></div><div class="structure_field_doc"><p>Whether the rewrite introduces new metavariables with the replacement.</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.RewriteInterface" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.Rewrite.toInterface"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L378-L399">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite.toInterface" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite.toInterface"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">Rewrite</span>.<span class="name">toInterface</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">rw</span> : <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite">Rewrite</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">name</span> : <span class="fn"><span class="fn">Lean.Name</span> <span class="fn">âŠ•</span> <span class="fn">Lean.FVarId</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">occ</span> : <span class="fn"><span class="fn">Option</span> <span class="fn">â„•</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">loc</span> : <span class="fn"><span class="fn">Option</span> <span class="fn">Lean.Name</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">range</span> : <span class="fn">Lean.Lsp.Range</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteInterface">RewriteInterface</a></span></div></div><p>Construct the <code><a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteInterface">RewriteInterface</a></code> from a <code><a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite">Rewrite</a></code>.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.Rewrite.toInterface" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.Kind"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L401-L408">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Kind" class="verification-badge comp-datatype" title="Computational datatype">ðŸ”¶ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Kind"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">Kind</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>The kind of rewrite</p><ul class="constructors"><li class="constructor" id="Mathlib.Tactic.LibraryRewrite.Kind.hypothesis">hypothesis : <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Kind">Kind</a><div class="inductive_ctor_doc"><p>A rewrite with a local hypothesis</p></div></li><li class="constructor" id="Mathlib.Tactic.LibraryRewrite.Kind.fromFile">fromFile : <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Kind">Kind</a><div class="inductive_ctor_doc"><p>A rewrite with a lemma from the current file</p></div></li><li class="constructor" id="Mathlib.Tactic.LibraryRewrite.Kind.fromCache">fromCache : <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Kind">Kind</a><div class="inductive_ctor_doc"><p>A rewrite with a lemma from an imported file</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.Kind" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.getRewriteInterfaces"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L410-L430">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getRewriteInterfaces" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.getRewriteInterfaces"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">getRewriteInterfaces</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">occ</span> : <span class="fn"><span class="fn">Option</span> <span class="fn">â„•</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">loc</span> : <span class="fn"><span class="fn">Option</span> <span class="fn">Lean.Name</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">except</span> : <span class="fn"><span class="fn">Option</span> <span class="fn">Lean.FVarId</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">range</span> : <span class="fn">Lean.Lsp.Range</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn"><span class="fn">Array</span> <span class="fn">(<span class="fn"><span class="fn">Array</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteInterface">RewriteInterface</a></span> <span class="fn">Ã—</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Kind">Kind</a>)</span></span> <span class="fn">Ã—</span> <span class="fn"><span class="fn">Array</span> <span class="fn">(<span class="fn"><span class="fn">Array</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteInterface">RewriteInterface</a></span> <span class="fn">Ã—</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Kind">Kind</a>)</span></span>)</span></span></div></div><p>Return the Interfaces for rewriting <code>e</code>, both filtered and unfiltered.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.getRewriteInterfaces" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.pattern"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L432-L437">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.pattern" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.pattern"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">pattern</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">Î±</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">type</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">symm</span> : <span class="fn">Bool</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><span class="fn">Lean.Expr</span> â†’ <span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">Î±</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">Î±</span></span></div></div><p>Render the matching side of the rewrite lemma.
This is shown at the header of each section of rewrite results.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.pattern" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.renderRewrites"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L439-L483">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.renderRewrites" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.renderRewrites"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">renderRewrites</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <span class="fn">Lean.Expr</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">results</span> : <span class="fn"><span class="fn">Array</span> <span class="fn">(<span class="fn"><span class="fn">Array</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.RewriteInterface">RewriteInterface</a></span> <span class="fn">Ã—</span> <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Kind">Kind</a>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">init</span> : <span class="fn"><span class="fn">Option</span> <span class="fn">ProofWidgets.Html</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">range</span> : <span class="fn">Lean.Lsp.Range</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">doc</span> : <span class="fn">Lean.Server.FileWorker.EditableDocument</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">showNames</span> : <span class="fn">Bool</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">ProofWidgets.Html</span></span></div></div><p>Render the given rewrite results.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.renderRewrites" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.rpc"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L485-L520">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.rpc" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.rpc"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">rpc</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">props</span> : <a href="../../.././Mathlib/Tactic/Widget/SelectPanelUtils.html#SelectInsertParams">SelectInsertParams</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.Server.RequestM</span> <span class="fn">(<span class="fn">Lean.Server.RequestTask</span> <span class="fn">ProofWidgets.Html</span>)</span></span></div></div><p>The rpc method of the <code>rw??</code> widget.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.rpc" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.LibraryRewriteComponent"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L522-L525">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.LibraryRewriteComponent" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.LibraryRewriteComponent"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">LibraryRewriteComponent</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">ProofWidgets.Component</span> <a href="../../.././Mathlib/Tactic/Widget/SelectPanelUtils.html#SelectInsertParams">SelectInsertParams</a></span></div></div><p>The component called by the <code>rw??</code> tactic</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.LibraryRewriteComponent" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.tacticRw??"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L527-L540">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.tacticRw??" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.tacticRw??"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">tacticRw??</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Lean.ParserDescr</span></div></div><p><code>rw??</code> is an interactive tactic that suggests rewrites for any expression selected by the user.
To use it, shift-click an expression in the goal or a hypothesis that you want to rewrite.
Clicking on one of the rewrite suggestions will paste the relevant rewrite tactic into the editor.</p><p>The rewrite suggestions are grouped and sorted by the pattern that the rewrite lemmas match with.
Rewrites that don't change the goal and rewrites that create the same goal as another rewrite
are filtered out, as well as rewrites that have new metavariables in the replacement expression.
To see all suggestions, click on the filter button (â–¼) in the top right.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.tacticRw??" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.Rewrite.toMessageData"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L543-L552">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite.toMessageData" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite.toMessageData"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">Rewrite</span>.<span class="name">toMessageData</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">rw</span> : <a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite">Rewrite</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">name</span> : <span class="fn">Lean.Name</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">Lean.MessageData</span></span></div></div><p>Represent a <code><a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite">Rewrite</a></code> as <code>MessageData</code>.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.Rewrite.toMessageData" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.SectionToMessageData"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L554-L560">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.SectionToMessageData" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.SectionToMessageData"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">SectionToMessageData</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">sec</span> : <span class="fn"><span class="fn"><span class="fn">Array</span> <span class="fn">(<a href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.Rewrite">Rewrite</a> <span class="fn">Ã—</span> <span class="fn">Lean.Name</span>)</span></span> <span class="fn">Ã—</span> <span class="fn">Bool</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Lean.MetaM</span> <span class="fn">(<span class="fn">Option</span> <span class="fn">Lean.MessageData</span>)</span></span></div></div><p>Represent a section of rewrites as <code>MessageData</code>.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.SectionToMessageData" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.rw??Command"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L562-L563">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.rw??Command" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.rw??Command"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">rw??Command</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Lean.ParserDescr</span></div></div><p><code>#rw?? e</code> gives all possible rewrites of <code>e</code>. It is a testing command for the <code>rw??</code> tactic</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.rw??Command" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.LibraryRewrite.elabrw??Command"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Tactic/Widget/LibraryRewrite.lean#L566-L591">source</a></div><div class="verification_link">
<a href="../../../../modules/Mathlib_Tactic_Widget_LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.elabrw??Command" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Widget/LibraryRewrite.html#Mathlib.Tactic.LibraryRewrite.elabrw??Command"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">LibraryRewrite</span>.<span class="name">elabrw??Command</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Lean.Elab.Command.CommandElab</span></div></div><p>Elaborate a <code>#rw??</code> command.</p><details id="instances-for-list-Mathlib.Tactic.LibraryRewrite.elabrw??Command" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>