<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../../.././style.css"></link><link rel="icon" href="../../../.././favicon.svg"></link><link rel="mask-icon" href="../../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Lean.Meta.RefinedDiscrTree.Basic</title><script defer="true" src="../../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../../.././";</script><script>const MODULE_NAME="Mathlib.Lean.Meta.RefinedDiscrTree.Basic";</script><script type="module" src="../../../.././jump-src.js"></script><script type="module" src="../../../.././search.js"></script><script type="module" src="../../../.././expand-nav.js"></script><script type="module" src="../../../.././how-about.js"></script><script type="module" src="../../../.././instances.js"></script><script type="module" src="../../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Basic</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../../.././Init.html">Init</a></li><li><a href="../../../.././Mathlib/Init.html">Mathlib.Init</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Lean.Meta.RefinedDiscrTree.Basic" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.Key"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instInhabitedKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instInhabitedKey.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedKey</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instBEqKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instBEqKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instBEqKey.beq"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instBEqKey</span>.<span class="name">beq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.Key.hash"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span>.<span class="name">hash</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instHashableKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instHashableKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.Key.format"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span>.<span class="name">format</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instToFormatKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.keysAsPattern"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">keysAsPattern</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.keysAsPattern.next"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">keysAsPattern</span>.<span class="name">next</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.keysAsPattern.mkApp"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">keysAsPattern</span>.<span class="name">mkApp</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.keysAsPattern.go"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">keysAsPattern</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.keysAsPattern.parenthesize"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">keysAsPattern</span>.<span class="name">parenthesize</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.Key.arity"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span>.<span class="name">arity</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.ExprInfo"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">ExprInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.mkExprInfo"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkExprInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.StackEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">StackEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.StackEntry.format"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">StackEntry</span>.<span class="name">format</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instToFormatStackEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatStackEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.LazyEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">LazyEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instInhabitedLazyEntry.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedLazyEntry</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instInhabitedLazyEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedLazyEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.mkInitLazyEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkInitLazyEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.LazyEntry.format"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">LazyEntry</span>.<span class="name">format</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instToFormatLazyEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatLazyEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.TrieIndex"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">TrieIndex</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.Trie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instInhabitedTrie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedTrie</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.instInhabitedRefinedDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instInhabitedRefinedDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.instInhabitedRefinedDiscrTree.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instInhabitedRefinedDiscrTree</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.format"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">format</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.format.go"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">format</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instToFormat"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormat</span></a></div></nav><main>
<div class="mod_doc"><h1 id="Basic-Definitions-for-RefinedDiscrTree" class="markdown-heading">Basic Definitions for <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree">RefinedDiscrTree</a></code> <a class="hover-link" href="#Basic-Definitions-for-RefinedDiscrTree">#</a></h1><p>We define</p><ul><li><code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></code>, the discrimination tree key</li><li><code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">LazyEntry</a></code>, the partial, lazy computation of a sequence of <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></code>s</li><li><code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie">Trie</a></code>, a node of the discrimination tree, which is indexed with <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></code>s
and stores an array of pending <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">LazyEntry</a></code>s</li><li><code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree">RefinedDiscrTree</a></code>, the discrimination tree itself.</li></ul></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.Key"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L26-L51">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.Key" class="verification-badge comp-datatype" title="Computational datatype">ðŸ”¶ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>Discrimination tree key.</p><ul class="constructors"><li class="constructor" id="Lean.Meta.RefinedDiscrTree.Key.star">star : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a><div class="inductive_ctor_doc"><p>A metavariable. This key matches with anything.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.Key.labelledStar">labelledStar<span class="decl_args">
<span class="fn">(<span class="fn">id</span> : <span class="fn">â„•</span>)</span></span>
 : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a><div class="inductive_ctor_doc"><p>A metavariable. This key matches with anything. It stores an identifier.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.Key.opaque">opaque : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a><div class="inductive_ctor_doc"><p>An opaque variable. This key only matches with <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.star">Key.star</a></code>.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.Key.const">const<span class="decl_args">
<span class="fn">(<span class="fn">declName</span> : <span class="fn">Name</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">nargs</span> : <span class="fn">â„•</span>)</span></span>
 : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a><div class="inductive_ctor_doc"><p>A constant. It stores the name and the arity.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.Key.fvar">fvar<span class="decl_args">
<span class="fn">(<span class="fn">fvarId</span> : <span class="fn">FVarId</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">nargs</span> : <span class="fn">â„•</span>)</span></span>
 : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a><div class="inductive_ctor_doc"><p>A free variable. It stores the <code>FVarId</code> and the arity.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.Key.bvar">bvar<span class="decl_args">
<span class="fn">(<span class="fn">deBruijnIndex </span><span class="fn">nargs</span> : <span class="fn">â„•</span>)</span></span>
 : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a><div class="inductive_ctor_doc"><p>A bound variable, from a lambda or forall binder.
It stores the De Bruijn index and the arity.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.Key.lit">lit<span class="decl_args">
<span class="fn">(<span class="fn">v</span> : <span class="fn">Literal</span>)</span></span>
 : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a><div class="inductive_ctor_doc"><p>A literal.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.Key.sort">sort : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a><div class="inductive_ctor_doc"><p>A sort. Universe levels are ignored.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.Key.lam">lam : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a><div class="inductive_ctor_doc"><p>A lambda function.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.Key.forall">forall : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a><div class="inductive_ctor_doc"><p>A dependent arrow.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.Key.proj">proj<span class="decl_args">
<span class="fn">(<span class="fn">typeName</span> : <span class="fn">Name</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">idx </span><span class="fn">nargs</span> : <span class="fn">â„•</span>)</span></span>
 : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a><div class="inductive_ctor_doc"><p>A projection. It stores the structure name, the projection index and the arity.</p></div></li></ul><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.Key" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instInhabitedKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L51-L51">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instInhabitedKey" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instInhabitedKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Inhabited</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></span></div></div></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instInhabitedKey.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L51-L51">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instInhabitedKey.default" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instInhabitedKey.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedKey</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></div></div><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.instInhabitedKey.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instBEqKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L51-L51">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instBEqKey" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instBEqKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instBEqKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">BEq</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></span></div></div></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instBEqKey.beq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L51-L51">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instBEqKey.beq" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instBEqKey.beq"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instBEqKey</span>.<span class="name">beq</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a> â†’ <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a> â†’ <span class="fn">Bool</span></span></div></div><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.instBEqKey.beq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.Key.hash"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L53-L70">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.Key.hash" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.hash"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span>.<span class="name">hash</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a> â†’ <span class="fn">UInt64</span></span></div></div><p>Compute the hash of a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">RefinedDiscrTree.Key</a></code>.</p><p>Note: at the root, <code>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.const">const</a></code> is the most common key, and it is very uncommon
to get the same constant name with a different arity.
So for performance, we just use <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.hash">hash</a> name</code> to hash <code>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.const">const</a> name _</code>.</p><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.Key.hash" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instHashableKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L72-L72">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instHashableKey" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instHashableKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instHashableKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Hashable</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></span></div></div></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.Key.format"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L74-L87">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.Key.format" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.format"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span>.<span class="name">format</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a> â†’ <span class="fn">Format</span></span></div></div><p>Format a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">RefinedDiscrTree.Key</a></code>.</p><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.Key.format" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instToFormatKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L89-L89">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instToFormatKey" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instToFormatKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">ToFormat</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></span></div></div></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.keysAsPattern"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L91-L141">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.keysAsPattern" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.keysAsPattern"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">keysAsPattern</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">keys</span> : <span class="fn"><span class="fn">Array</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">CoreM</span> <span class="fn">MessageData</span></span></div></div><p>Converts an entry (i.e., <code>List <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></code>) to the discrimination tree into
<code>MessageData</code> that is more user-friendly.</p><p>This is a copy of <code>Lean.Meta.DiscrTree.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.keysAsPattern">keysAsPattern</a></code></p><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.keysAsPattern" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.keysAsPattern.next"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L104-L107">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.keysAsPattern.next" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.keysAsPattern.next"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">keysAsPattern</span>.<span class="name">next</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">keys</span> : <span class="fn"><span class="fn">Array</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">StateRefT'</span> <span class="fn">IO.RealWorld</span> <span class="fn">(<span class="fn">List</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a>)</span> <span class="fn">CoreM</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></span></div></div><p>Get the next key.</p><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.keysAsPattern.next" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.keysAsPattern.mkApp"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L109-L120">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.keysAsPattern.mkApp" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.keysAsPattern.mkApp"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">keysAsPattern</span>.<span class="name">mkApp</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">keys</span> : <span class="fn"><span class="fn">Array</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn">MessageData</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">nargs</span> : <span class="fn">â„•</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">paren</span> : <span class="fn">Bool</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">StateRefT'</span> <span class="fn">IO.RealWorld</span> <span class="fn">(<span class="fn">List</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a>)</span> <span class="fn">CoreM</span> <span class="fn">MessageData</span></span></div></div><p>Format the application <code>f args</code>.</p></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.keysAsPattern.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L123-L138">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.keysAsPattern.go" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.keysAsPattern.go"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">keysAsPattern</span>.<span class="name">go</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">keys</span> : <span class="fn"><span class="fn">Array</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">paren</span> : <span class="fn">Bool</span> := <span class="fn">true</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">StateRefT'</span> <span class="fn">IO.RealWorld</span> <span class="fn">(<span class="fn">List</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a>)</span> <span class="fn">CoreM</span> <span class="fn">MessageData</span></span></div></div><p>Format the next expression.</p></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.keysAsPattern.parenthesize"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L140-L141">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.keysAsPattern.parenthesize" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.keysAsPattern.parenthesize"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">keysAsPattern</span>.<span class="name">parenthesize</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">msg</span> : <span class="fn">MessageData</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">paren</span> : <span class="fn">Bool</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">MessageData</span></div></div><p>Add parentheses if <code>paren == true</code>.</p><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.keysAsPattern.parenthesize" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.Key.arity"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L143-L151">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.Key.arity" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.arity"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span>.<span class="name">arity</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a> â†’ <span class="fn">â„•</span></span></div></div><p>Return the number of arguments that the <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></code> takes.</p><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.Key.arity" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.ExprInfo"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L153-L165">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.ExprInfo" class="verification-badge comp-datatype" title="Computational datatype">ðŸ”¶ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.ExprInfo"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">ExprInfo</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>The information for computing the keys of a subexpression.</p><ul class="structure_fields" id="Lean.Meta.RefinedDiscrTree.ExprInfo.mk"><li id="Lean.Meta.RefinedDiscrTree.ExprInfo.expr" class="structure_field"><div class="structure_field_info">expr : <span class="fn">Expr</span></div><div class="structure_field_doc"><p>The expression</p></div></li><li id="Lean.Meta.RefinedDiscrTree.ExprInfo.bvars" class="structure_field"><div class="structure_field_info">bvars : <span class="fn"><span class="fn">List</span> <span class="fn">FVarId</span></span></div><div class="structure_field_doc"><p>Variables that come from a lambda or forall binder.
The list index gives the De Bruijn index.</p></div></li><li id="Lean.Meta.RefinedDiscrTree.ExprInfo.lctx" class="structure_field"><div class="structure_field_info">lctx : <span class="fn">LocalContext</span></div><div class="structure_field_doc"><p>The local context, which contains the introduced bound variables.</p></div></li><li id="Lean.Meta.RefinedDiscrTree.ExprInfo.localInsts" class="structure_field"><div class="structure_field_info">localInsts : <span class="fn">LocalInstances</span></div><div class="structure_field_doc"><p>The local instances, which may contain the introduced bound variables.</p></div></li><li id="Lean.Meta.RefinedDiscrTree.ExprInfo.cfg" class="structure_field"><div class="structure_field_info">cfg : <span class="fn">Config</span></div><div class="structure_field_doc"><p>The <code>Meta.Config</code> used by this entry.</p></div></li></ul><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.ExprInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.mkExprInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L167-L174">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.mkExprInfo" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.mkExprInfo"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkExprInfo</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">expr</span> : <span class="fn">Expr</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">bvars</span> : <span class="fn"><span class="fn">List</span> <span class="fn">FVarId</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">MetaM</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.ExprInfo">ExprInfo</a></span></div></div><p>Creates an <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.ExprInfo">ExprInfo</a></code> using the current context.</p><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.mkExprInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.StackEntry"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L176-L181">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.StackEntry" class="verification-badge comp-datatype" title="Computational datatype">ðŸ”¶ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.StackEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">StackEntry</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>The possible values that can appear in the stack</p><ul class="constructors"><li class="constructor" id="Lean.Meta.RefinedDiscrTree.StackEntry.star">star : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.StackEntry">StackEntry</a><div class="inductive_ctor_doc"><p><code>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.star">star</a></code> is an expression that will not be explicitly indexed.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.StackEntry.expr">expr<span class="decl_args">
<span class="fn">(<span class="fn">info</span> : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.ExprInfo">ExprInfo</a>)</span></span>
 : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.StackEntry">StackEntry</a><div class="inductive_ctor_doc"><p><code>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.ExprInfo.expr">expr</a></code> is an expression that will be indexed.</p></div></li></ul><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.StackEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.StackEntry.format"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L183-L186">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.StackEntry.format" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.StackEntry.format"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">StackEntry</span>.<span class="name">format</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.StackEntry">StackEntry</a> â†’ <span class="fn">Format</span></span></div></div><p>Format a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.StackEntry">RefinedDiscrTree.StackEntry</a></code>.</p><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.StackEntry.format" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instToFormatStackEntry"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L188-L188">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instToFormatStackEntry" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instToFormatStackEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatStackEntry</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">ToFormat</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.StackEntry">StackEntry</a></span></div></div></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.LazyEntry"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L190-L226">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry" class="verification-badge comp-datatype" title="Computational datatype">ðŸ”¶ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">LazyEntry</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>A <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">LazyEntry</a></code> represents a snapshot of the computation of encoding an <code>Expr</code> as <code>Array <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></code>.
This is used for computing the keys one by one.</p><ul class="structure_fields" id="Lean.Meta.RefinedDiscrTree.LazyEntry.mk"><li id="Lean.Meta.RefinedDiscrTree.LazyEntry.previous" class="structure_field"><div class="structure_field_info">previous : <span class="fn"><span class="fn">Option</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.ExprInfo">ExprInfo</a></span></div><div class="structure_field_doc"><p>If an expression creates more entries in the stack, for example because it is an application,
then instead of pushing to the stack greedily, we only extend the stack once we need to.
So, the field <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry.previous">previous</a></code> is used to extend the <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry.stack">stack</a></code> before looking in the <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry.stack">stack</a></code>.</p><p>For example in <code>10.add (20.add 30)</code>, after computing the key <code>âŸ¨Nat.add, 2âŸ©</code>, the stack is still
empty, and <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry.previous">previous</a></code> will be <code>10.add (20.add 30)</code>.</p></div></li><li id="Lean.Meta.RefinedDiscrTree.LazyEntry.stack" class="structure_field"><div class="structure_field_info">stack : <span class="fn"><span class="fn">List</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.StackEntry">StackEntry</a></span></div><div class="structure_field_doc"><p>The stack, used to emulate recursion. It contains the list of all expressions for which the
keys still need to be computed, in that order.</p><p>For example in <code>10.add (20.add 30)</code>, after computing the keys <code>âŸ¨Nat.add, 2âŸ©</code> and <code>10</code>, the stack
will be a list of length 1 containing the expression <code>20.add 30</code>.</p></div></li><li id="Lean.Meta.RefinedDiscrTree.LazyEntry.mctx" class="structure_field"><div class="structure_field_info">mctx : <span class="fn">MetavarContext</span></div><div class="structure_field_doc"><p>The metavariable context, which may contain variables appearing in this entry.</p></div></li><li id="Lean.Meta.RefinedDiscrTree.LazyEntry.labelledStars?" class="structure_field"><div class="structure_field_info">labelledStars? : <span class="fn"><span class="fn">Option</span> <span class="fn">(<span class="fn">Array</span> <span class="fn">MVarId</span>)</span></span></div><div class="structure_field_doc"><p><code>MVarId</code>s corresponding to the <code>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.labelledStar">labelledStar</a></code> labels. The index in the array is the label.
It is <code>none</code> if we use <code>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.star">star</a></code> instead of <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.labelledStar">labelledStar</a></code>,
for example when encoding the lookup expression.</p></div></li><li id="Lean.Meta.RefinedDiscrTree.LazyEntry.computedKeys" class="structure_field"><div class="structure_field_info">computedKeys : <span class="fn"><span class="fn">List</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></span></div><div class="structure_field_doc"><p>The <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></code>s that have already been computed.</p><p>Sometimes, more than one <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></code> ends up being computed in one go. This happens when
there are lambda binders (because it depends on the body whether the lambda key
should be indexed or not). In that case the remaining <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></code>s are stored in <code>results</code>.</p></div></li></ul><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.LazyEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instInhabitedLazyEntry.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L226-L226">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instInhabitedLazyEntry.default" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instInhabitedLazyEntry.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedLazyEntry</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">LazyEntry</a></div></div><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.instInhabitedLazyEntry.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instInhabitedLazyEntry"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L226-L226">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instInhabitedLazyEntry" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instInhabitedLazyEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedLazyEntry</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Inhabited</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">LazyEntry</a></span></div></div></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.mkInitLazyEntry"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L228-L233">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.mkInitLazyEntry" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.mkInitLazyEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkInitLazyEntry</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">labelledStars</span> : <span class="fn">Bool</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">MetaM</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">LazyEntry</a></span></div></div><p>Creates a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">LazyEntry</a></code> using the current metavariable context.</p><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.mkInitLazyEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.LazyEntry.format"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L235-L242">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry.format" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry.format"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">LazyEntry</span>.<span class="name">format</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">entry</span> : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">LazyEntry</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">Format</span></div></div><p>Format a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">RefinedDiscrTree.LazyEntry</a></code>.</p><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.LazyEntry.format" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instToFormatLazyEntry"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L244-L244">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instToFormatLazyEntry" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instToFormatLazyEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatLazyEntry</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">ToFormat</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">LazyEntry</a></span></div></div></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.TrieIndex"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L246-L247">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.TrieIndex" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.TrieIndex"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">TrieIndex</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>Array index of a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie">Trie</a> Î±</code> in the <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.tries">tries</a></code> of a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree">RefinedDiscrTree</a></code>.</p><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.TrieIndex" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.Trie"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L249-L269">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.Trie" class="verification-badge comp-datatype" title="Computational datatype">ðŸ”¶ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">Î±</span> : <a href="../../../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>Discrimination tree trie. See <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree">RefinedDiscrTree</a></code>.</p><p>A <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie">Trie</a></code> will normally have exactly one of the following</p><ul><li>nonempty <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie.values">values</a></code></li><li>nonempty <code>stars</code>, <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie.labelledStars">labelledStars</a></code> and/or <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie.children">children</a></code></li><li>nonempty <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie.pending">pending</a></code>
But defining it as a structure that can have all at the same time turns out to be easier.</li></ul><ul class="structure_ext"><li id="Lean.Meta.RefinedDiscrTree.Trie.node" class="structure_ext_ctor">node :: (</li><ul class="structure_ext_fields"><li id="Lean.Meta.RefinedDiscrTree.Trie.values" class="structure_field"><div class="structure_field_info">values : <span class="fn"><span class="fn">Array</span> <span class="fn">Î±</span></span></div><div class="structure_field_doc"><p>Return values, at a leaf</p></div></li><li id="Lean.Meta.RefinedDiscrTree.Trie.star" class="structure_field"><div class="structure_field_info">star : <span class="fn"><span class="fn">Option</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.TrieIndex">TrieIndex</a></span></div><div class="structure_field_doc"><p>Following <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie">Trie</a></code>s based on a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.star">Key.star</a></code>.</p></div></li><li id="Lean.Meta.RefinedDiscrTree.Trie.labelledStars" class="structure_field"><div class="structure_field_info">labelledStars : <span class="fn"><span class="fn">Std.HashMap</span> <span class="fn">â„•</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.TrieIndex">TrieIndex</a></span></div><div class="structure_field_doc"><p>Following <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie">Trie</a></code>s based on a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key.labelledStar">Key.labelledStar</a></code>.</p></div></li><li id="Lean.Meta.RefinedDiscrTree.Trie.children" class="structure_field"><div class="structure_field_info">children : <span class="fn"><span class="fn">Std.HashMap</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.TrieIndex">TrieIndex</a></span></div><div class="structure_field_doc"><p>Following <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie">Trie</a></code>s based on the <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></code>.</p></div></li><li id="Lean.Meta.RefinedDiscrTree.Trie.pending" class="structure_field"><div class="structure_field_info">pending : <span class="fn"><span class="fn">Array</span> <span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.LazyEntry">LazyEntry</a> <span class="fn">Ã—</span> <span class="fn">Î±</span>)</span></span></div><div class="structure_field_doc"><p>Lazy entries that still have to be evaluated.</p></div></li></ul><li class="structure_ext_ctor">)</li></ul><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.Trie" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instInhabitedTrie"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L271-L271">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instInhabitedTrie" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instInhabitedTrie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedTrie</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">Î±</span> : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Inhabited</span> <span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie">Trie</a> <span class="fn">Î±</span>)</span></span></div></div></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L277-L289">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree" class="verification-badge comp-datatype" title="Computational datatype">ðŸ”¶ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">Î±</span> : <a href="../../../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>Lazy refined discrimination tree. It is an index from expressions to values of type <code>Î±</code>.</p><p>We store all of the nodes in one <code>Array</code>, <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.tries">tries</a></code>, instead of using a 'normal' inductive type.
This is so that we can modify the tree globally, which is very useful when evaluating lazy
entries and saving the result globally.</p><ul class="structure_fields" id="Lean.Meta.RefinedDiscrTree.mk"><li id="Lean.Meta.RefinedDiscrTree.root" class="structure_field"><div class="structure_field_info">root : <span class="fn"><span class="fn">Std.HashMap</span> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.TrieIndex">TrieIndex</a></span></div><div class="structure_field_doc"><p><code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie">Trie</a></code>s at the root based of the <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></code>.</p></div></li><li id="Lean.Meta.RefinedDiscrTree.tries" class="structure_field"><div class="structure_field_info">tries : <span class="fn"><span class="fn">Array</span> <span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie">Trie</a> <span class="fn">Î±</span>)</span></span></div><div class="structure_field_doc"><p>Array of trie entries. Should be owned by this trie.</p></div></li></ul><details id="instances-for-list-Lean.Meta.RefinedDiscrTree" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.instInhabitedRefinedDiscrTree"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L289-L289">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.instInhabitedRefinedDiscrTree" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.instInhabitedRefinedDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instInhabitedRefinedDiscrTree</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">aâœ</span> : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">Inhabited</span> <span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree">RefinedDiscrTree</a> <span class="fn">aâœ</span>)</span></span></div></div></div></div><div class="decl" id="Lean.Meta.instInhabitedRefinedDiscrTree.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L289-L289">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.instInhabitedRefinedDiscrTree.default" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.instInhabitedRefinedDiscrTree.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instInhabitedRefinedDiscrTree</span>.<span class="name">default</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">aâœ</span> : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree">RefinedDiscrTree</a> <span class="fn">aâœ</span></span></div></div><details id="instances-for-list-Lean.Meta.instInhabitedRefinedDiscrTree.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.format"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L295-L353">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.format" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.format"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">format</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">Î±</span> : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><span class="fn">ToFormat</span> <span class="fn">Î±</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">tree</span> : <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree">RefinedDiscrTree</a> <span class="fn">Î±</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">Format</span></div></div><p>Format a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree">RefinedDiscrTree</a></code> as a flowchart.</p><ul><li>Non-terminal nodes are of the form <code>{key} =&gt;</code>, followed by all of the following nodes,
indented with 2 more spaces.</li><li>Terminal nodes have either &quot;entries&quot;, containing the return values,
or &quot;pending entries&quot;, for nodes that have not been evaluated/expanded.</li></ul><p>For example:</p><pre><code>Discrimination tree flowchart:
âŸ¨HMul.hMul, 6âŸ© =&gt;
  âŸ¨Int, 0âŸ© =&gt;
    âŸ¨Int, 0âŸ© =&gt;
      * =&gt;
        * =&gt;
          *0 =&gt;
            *0 =&gt;
              <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie.pending">pending</a> entries: #[mul_self]
            *1 =&gt;
              entries: #[mul_comm]
            âŸ¨Neg.neg, 3âŸ© =&gt;
              âŸ¨Int, 0âŸ© =&gt;
                * =&gt;
                  *1 =&gt;
                    entries: #[mul_neg]
            1 =&gt;
              <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie.pending">pending</a> entries: #[mul_one]
          âŸ¨Neg.neg, 3âŸ© =&gt;
            <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Trie.pending">pending</a> entries: #[neg_mul]
          1 =&gt;
            *0 =&gt;
              entries: #[one_mul]
</code></pre><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.format" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.format.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L337-L353">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.format.go" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.format.go"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">format</span>.<span class="name">go</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">Î±</span> : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><span class="fn">ToFormat</span> <span class="fn">Î±</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">tree</span> : <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree">RefinedDiscrTree</a> <span class="fn">Î±</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">trie</span> : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.TrieIndex">TrieIndex</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">Format</span></div></div><p>Auxiliary function for <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.format">RefinedDiscrTree.format</a></code>.</p></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instToFormat"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/338973d7437af2cf5a6769391b1b4e5b1f8db099/Mathlib/Lean/Meta/RefinedDiscrTree/Basic.lean#L355-L355">source</a></div><div class="verification_link">
<a href="../../../../../modules/Mathlib_Lean_Meta_RefinedDiscrTree_Basic.html#Lean.Meta.RefinedDiscrTree.instToFormat" class="verification-badge comp-operation" title="Computational operation (Bool/decidable)">ðŸ”¸ coverage</a>
</div>
<div class="attributes">@[implicit_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.instToFormat"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormat</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">Î±</span> : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><span class="fn">ToFormat</span> <span class="fn">Î±</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">ToFormat</span> <span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree">RefinedDiscrTree</a> <span class="fn">Î±</span>)</span></span></div></div></div></div></main>
<nav class="nav"><iframe src="../../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>